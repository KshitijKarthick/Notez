"use strict";angular.module("notezApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"NotesController",controllerAs:"notes"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("notezApp").controller("NotesController",["$timeout","modal","$window",function(a,b,c){this.emptySelectedContent=function(){this.selectedNoteContent="",this.selectedNoteTitle=""},this.showAlert=!1,this.alertMessage="",this.emptySelectedContent(),this.emptyNotes=!0,this.modal=b,this.db=new c.Dexie("notez"),this.db.version(1).stores({notez:"id,title,content,timestamp"}),this.db.open()["catch"](function(a){console.error("IndexedDB support not present",a)}),this.notesList=[],this.db.notez.each(function(b){this.emptyNotes=!1,a.apply(this.notesList.push(b))}.bind(this)),this.addNote=function(){function a(a){for(var b=5381,c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)+b+d}return b}this.emptyNotes=!1;var b=(new Date).getTime(),c={title:this.selectedNoteTitle,content:this.selectedNoteContent,timestamp:b,id:a(this.selectedNoteTitle+b)};this.notesList.push(c),this.db.notez.add(c),this.alert("Created "+this.selectedNoteTitle+" successfully"),this.emptySelectedContent()},this.removeNote=function(a){for(var b=0;b<this.notesList.length;b++)if(this.notesList[b].id===a&&b>-1){var c=this.notesList.splice(b,1);this.db.notez["delete"](c[0].id),this.alert("Deleted "+c[0].title+" successfully");break}0===this.notesList.length&&(this.emptyNotes=!0)},this.editNote=function(a){for(var b=0;b<this.notesList.length;b++)if(this.notesList[b].id===a&&b>-1){this.selectedNoteTitle=this.notesList[b].title,this.selectedNoteContent=this.notesList[b].content,this.modal.setModalData("Edit a Note","Save a Note",function(){this.notesList[b].title=this.selectedNoteTitle,this.notesList[b].content=this.selectedNoteContent,this.notesList[b].timestamp=(new Date).getTime(),this.db.notez.update(this.notesList[b].id,this.notesList[b]),this.emptySelectedContent()}.bind(this));break}},this.invokeCreationofNote=function(){this.modal.setModalData("Create a Note","Create Note",function(){this.addNote()}.bind(this))},this.alert=function(b){this.alertMessage=b,this.showAlert=!0,a(function(){this.showAlert=!1}.bind(this),3e3)}}]).factory("modal",["$window",function(a){var b="#myModal",c="Title",d="Do Task",e=function(){console.log("Hello User")},f=function(a,b,f){c=a,d=b,e=f,h()},g=function(){return c},h=function(){a.jQuery(b).modal("toggle")},i=function(){return d},j=function(){return function(){e(),h()}};return{getModalTitle:g,getActionButtonTitle:i,setModalData:f,action:e,getAction:j,toggleModal:h}}]).controller("HeaderController",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]).filter("orderObjectBy",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!==e&&(a=a.substr(0,e))}return a+(d||" â€¦")}}),angular.module("notezApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("notezApp").run(["$templateCache",function(a){a.put("views/about.html",'<a href="https://github.com/kshitijkarthick/notez"><img style="position: absolute; top: 0; right: 0; border: 0" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a> <div class="jumbotron text-center"> <h3>Kshitij Karthick</h3> <p><small>Notez application utilising IndexedDB, AngularJS<small><p> </p></small></small></p></div>'),a.put("views/main.html",'<div class="container"> <div class="row well notes-container"> <div ng-show="notes.emptyNotes"> <blockquote> <p class="lead">Hey Human &#128522;</p><p>Seems like you dont have any <strong>Notes</strong> &#x1f61e;</p> </blockquote> </div> <div class="col-md-3 col-xs-12 col-sm-6 col-md-offset-1 panel panel-default note" ng-repeat="note in notes.notesList | orderObjectBy:\'note.timestamp\':true track by note.timestamp"> <div class="panel-body"> <h4> <strong>{{note.title| cut:true:15:\' ...\'}}</strong> <span ng-click="notes.editNote({{note.id}})" class="edit-icon pull-right glyphicon glyphicon-pencil" aria-hidden="true"></span> <span ng-click="notes.removeNote({{note.id}})" class="trash-icon pull-right glyphicon glyphicon-trash" aria-hidden="true"></span> </h4> <p>{{note.content | cut:true:30:\' ...\'}}</p> <h6> {{note.timestamp | date:\'short\'}} </h6> </div> <div class="clearfix visible-xs-block"></div> </div> </div> <div class="alert alert-info" ng-show="notes.showAlert" role="alert">{{notes.alertMessage}}</div> <button type="button" class="btn create-button" ng-click="notes.invokeCreationofNote()"> Create a Note </button> <div class="modal fade" id="myModal"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title">{{notes.modal.getModalTitle()}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-2 control-label">Title</label> <div class="col-sm-10"> <input type="text" ng-model="notes.selectedNoteTitle" class="form-control" id="title" placeholder="Title"> </div> </div> <div class="form-group"> <label class="col-sm-2 control-label">Content</label> <div class="col-sm-10"> <textarea name="Content" class="form-control" rows="3" ng-model="notes.selectedNoteContent" placeholder="Content"></textarea> </div> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="notes.emptySelectedContent();notes.modal.toggleModal()">Close</button> <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" ng-click="(notes.modal.getAction())()">{{notes.modal.getActionButtonTitle()}}</button> </div> </div><!-- /.modal-content --> </div><!-- /.modal-dialog --> </div><!-- /.modal --> <!-- Button trigger modal --> </div>')}]);